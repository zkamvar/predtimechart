var e={870:(e,t)=>{function a(e,t){return{validate:e,compare:t}}t.u5=void 0,t.u5={date:a(i,n),time:a(l,d),"date-time":a((function(e){const t=e.split(c);return 2===t.length&&i(t[0])&&l(t[1],!0)}),u),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return m.test(e)&&p.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(v.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return h.lastIndex=0,h.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=_&&e>=f}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:g},double:{type:"number",validate:g},password:!0,binary:!0},t.u5,a(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,n),a(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,d),a(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),Object.keys(t.u5);const s=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(e){const t=s.exec(e);if(!t)return!1;const a=+t[1],i=+t[2],n=+t[3];return i>=1&&i<=12&&n>=1&&n<=(2===i&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(a)?29:r[i])}function n(e,t){if(e&&t)return e>t?1:e<t?-1:0}const o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(e,t){const a=o.exec(e);if(!a)return!1;const s=+a[1],r=+a[2],i=+a[3],n=a[5];return(s<=23&&r<=59&&i<=59||23===s&&59===r&&60===i)&&(!t||""!==n)}function d(e,t){if(!e||!t)return;const a=o.exec(e),s=o.exec(t);return a&&s?(e=a[1]+a[2]+a[3]+(a[4]||""))>(t=s[1]+s[2]+s[3]+(s[4]||""))?1:e<t?-1:0:void 0}const c=/t|\s/i;function u(e,t){if(!e||!t)return;const[a,s]=e.split(c),[r,i]=t.split(c),o=n(a,r);return void 0!==o?o||d(s,i):void 0}const m=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,h=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,f=-(2**31),_=2**31-1;function g(){return!0}const v=/[^\\]\\Z/},510:(e,t,a)=>{const s=a(63);s.code='require("ajv/dist/runtime/equal").default',t.Z=s},499:(e,t)=>{function a(e){const t=e.length;let a,s=0,r=0;for(;r<t;)s++,a=e.charCodeAt(r++),a>=55296&&a<=56319&&r<t&&(a=e.charCodeAt(r),56320==(64512&a)&&r++);return s}t.Z=a,a.code='require("ajv/dist/runtime/ucs2length").default'},253:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(81),r=a.n(s),i=a(645),n=a.n(i)()(r());n.push([e.id,"/**\n * predtimechart: A JavaScript (ES6 ECMAScript) module for forecast visualization.\n */\n\n.forecastViz_dot {\n    height: 15px;\n    width: 15px;\n    border-radius: 50%;\n    border: 1px solid black;\n    display: inline-block;\n}\n\n.forecastViz_select_data {\n    font-size: 14px;\n}\n\n#forecastViz_select_model {\n    height: 48vh;\n    overflow-y: scroll;\n    font-size: 14px;\n}\n\n.forecastViz_disclaimer {\n    text-align: center;\n    margin-left: 3%;\n    margin-right: 3%;\n    font-size: 18px;\n}\n",""]);const o=n},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",s=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),s&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),s&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,s,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var n={};if(s)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(n[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);s&&n[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),a&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=a):c[2]=a),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},63:e=>{e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var s,r,i;if(Array.isArray(t)){if((s=t.length)!=a.length)return!1;for(r=s;0!=r--;)if(!e(t[r],a[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((s=(i=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(r=s;0!=r--;)if(!Object.prototype.hasOwnProperty.call(a,i[r]))return!1;for(r=s;0!=r--;){var n=i[r];if(!e(t[n],a[n]))return!1}return!0}return t!=t&&a!=a}},379:e=>{var t=[];function a(e){for(var a=-1,s=0;s<t.length;s++)if(t[s].identifier===e){a=s;break}return a}function s(e,s){for(var i={},n=[],o=0;o<e.length;o++){var l=e[o],d=s.base?l[0]+s.base:l[0],c=i[d]||0,u="".concat(d," ").concat(c);i[d]=c+1;var m=a(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==m)t[m].references++,t[m].updater(p);else{var h=r(p,s);s.byIndex=o,t.splice(o,0,{identifier:u,updater:h,references:1})}n.push(u)}return n}function r(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,r){var i=s(e=e||[],r=r||{});return function(e){e=e||[];for(var n=0;n<i.length;n++){var o=a(i[n]);t[o].references--}for(var l=s(e,r),d=0;d<i.length;d++){var c=a(i[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=l}}},569:e=>{var t={};e.exports=function(e,a){var s=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(a)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var s="";a.supports&&(s+="@supports (".concat(a.supports,") {")),a.media&&(s+="@media ".concat(a.media," {"));var r=void 0!==a.layer;r&&(s+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),s+=a.css,r&&(s+="}"),a.media&&(s+="}"),a.supports&&(s+="}");var i=a.sourceMap;i&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},840:(e,t,a)=>{e.exports=c,e.exports.default=c;const s={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://github.com/reichlab/predtimechart/blob/main/src/schema.json",title:"predtimechart options",description:"predtimechart options object schema",type:"object",additionalProperties:!1,properties:{available_as_ofs:{description:"`object` that maps `target_variables` `value` to an `array` of dates in 'YYYY-MM-DD' format that have truth and/or forecasts available",type:"object",minProperties:1,additionalProperties:{type:"array",minItems:1,items:{type:"string",format:"date"}}},current_date:{description:"`available_as_ofs` `value` key to use for the initial plot",type:"string",format:"date"},disclaimer:{description:"`string` providing any important information users should know",type:"string",minLength:1},initial_as_of:{description:"`string` specifying the initial date from 'available_as_ofs' (in 'YYYY-MM-DD' format) to use for the initially-selected _as_of_ date",type:"string",format:"date"},initial_checked_models:{description:"`models` value(s) to use for the initial plot",type:"array",uniqueItems:!0},initial_interval:{description:"`intervals` value to use for the initial plot",type:"string"},initial_target_var:{description:"`target_variables` `value` key to use for the initial plot",type:"string"},initial_task_ids:{description:"an `object` to use for the initial plot. format is identical to `_fetchData()`'s `taskIDs` arg",type:"object",minProperties:1},initial_xaxis_range:{description:"optional `array` of two dates in 'YYYY-MM-DD' format that specify the initial xaxis range to use. To not initialize the range, either don't pass this key or pass `null` for its value",type:["array","null"],minItems:2,maxItems:2,uniqueItems:!0,items:{type:"string",format:"date"}},intervals:{description:"`array` of one or more strings of the format '<integer>%' between '0%' and '100%' inclusive, representing percentages. Currently only '50%' and '95%' are used (purpose: TBD)",type:"array",minItems:1,uniqueItems:!0,items:{type:"string",pattern:"^[1-9]?[0-9]%$"}},models:{description:"`array` of model names (`string`s) that provide data",type:"array",minItems:1,uniqueItems:!0},target_variables:{description:"`array` of `object`s defining the target variables in the data. Each object contains three keys: `value`, `text`, `plot_text`",type:"array",minItems:1,items:{type:"object",additionalProperties:!1,properties:{value:{description:"used as the main value that's passed around for the target",type:"string",minLength:1},text:{description:"human-readable text",type:"string",minLength:1},plot_text:{description:"plot text",type:"string",minLength:1}},required:["value","text","plot_text"]}},task_ids:{description:"`object` defining the _tasks_ in the data as described in `_fetchData`'s `taskIDs` arg",type:"object",minProperties:1,patternProperties:{"^[A-Za-z]+[A-Za-z0-9_-]*$":{type:"array",items:{type:"object",properties:{value:{description:"used as the main value that's passed around for the task_id",type:"string",minLength:1},text:{description:"human-readable text",type:"string",minLength:1}}}}},additionalProperties:!1}},required:["available_as_ofs","current_date","disclaimer","initial_as_of","initial_checked_models","initial_interval","initial_target_var","initial_task_ids","initial_xaxis_range","intervals","models","target_variables","task_ids"]},r=Object.prototype.hasOwnProperty,i=a(499).Z,n=a(510).Z,o=a(870).u5.date,l=new RegExp("^[1-9]?[0-9]%$","u"),d=new RegExp("^[A-Za-z]+[A-Za-z0-9_-]*$","u");function c(e,{instancePath:t="",parentData:a,parentDataProperty:u,rootData:m=e}={}){let p=null,h=0;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.available_as_ofs){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"available_as_ofs"},message:"must have required property 'available_as_ofs'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.current_date){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"current_date"},message:"must have required property 'current_date'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.disclaimer){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"disclaimer"},message:"must have required property 'disclaimer'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.initial_as_of){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_as_of"},message:"must have required property 'initial_as_of'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.initial_checked_models){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_checked_models"},message:"must have required property 'initial_checked_models'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.initial_interval){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_interval"},message:"must have required property 'initial_interval'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.initial_target_var){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_target_var"},message:"must have required property 'initial_target_var'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.initial_task_ids){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_task_ids"},message:"must have required property 'initial_task_ids'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.initial_xaxis_range){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_xaxis_range"},message:"must have required property 'initial_xaxis_range'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.intervals){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"intervals"},message:"must have required property 'intervals'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.models){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"models"},message:"must have required property 'models'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.target_variables){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"target_variables"},message:"must have required property 'target_variables'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.task_ids){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"task_ids"},message:"must have required property 'task_ids'"};null===p?p=[e]:p.push(e),h++}for(const a in e)if(!r.call(s.properties,a)){const e={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};null===p?p=[e]:p.push(e),h++}if(void 0!==e.available_as_ofs){let a=e.available_as_ofs;if(a&&"object"==typeof a&&!Array.isArray(a)){if(Object.keys(a).length<1){const e={instancePath:t+"/available_as_ofs",schemaPath:"#/properties/available_as_ofs/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};null===p?p=[e]:p.push(e),h++}for(const e in a){let s=a[e];if(Array.isArray(s)){if(s.length<1){const a={instancePath:t+"/available_as_ofs/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/available_as_ofs/additionalProperties/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===p?p=[a]:p.push(a),h++}const a=s.length;for(let r=0;r<a;r++){let a=s[r];if("string"==typeof a){if(!o.validate(a)){const a={instancePath:t+"/available_as_ofs/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+r,schemaPath:"#/properties/available_as_ofs/additionalProperties/items/format",keyword:"format",params:{format:"date"},message:'must match format "date"'};null===p?p=[a]:p.push(a),h++}}else{const a={instancePath:t+"/available_as_ofs/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+r,schemaPath:"#/properties/available_as_ofs/additionalProperties/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[a]:p.push(a),h++}}}else{const a={instancePath:t+"/available_as_ofs/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/available_as_ofs/additionalProperties/type",keyword:"type",params:{type:"array"},message:"must be array"};null===p?p=[a]:p.push(a),h++}}}else{const e={instancePath:t+"/available_as_ofs",schemaPath:"#/properties/available_as_ofs/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.current_date){let a=e.current_date;if("string"==typeof a){if(!o.validate(a)){const e={instancePath:t+"/current_date",schemaPath:"#/properties/current_date/format",keyword:"format",params:{format:"date"},message:'must match format "date"'};null===p?p=[e]:p.push(e),h++}}else{const e={instancePath:t+"/current_date",schemaPath:"#/properties/current_date/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.disclaimer){let a=e.disclaimer;if("string"==typeof a){if(i(a)<1){const e={instancePath:t+"/disclaimer",schemaPath:"#/properties/disclaimer/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===p?p=[e]:p.push(e),h++}}else{const e={instancePath:t+"/disclaimer",schemaPath:"#/properties/disclaimer/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.initial_as_of){let a=e.initial_as_of;if("string"==typeof a){if(!o.validate(a)){const e={instancePath:t+"/initial_as_of",schemaPath:"#/properties/initial_as_of/format",keyword:"format",params:{format:"date"},message:'must match format "date"'};null===p?p=[e]:p.push(e),h++}}else{const e={instancePath:t+"/initial_as_of",schemaPath:"#/properties/initial_as_of/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.initial_checked_models){let a=e.initial_checked_models;if(Array.isArray(a)){let e,s=a.length;if(s>1)e:for(;s--;)for(e=s;e--;)if(n(a[s],a[e])){const a={instancePath:t+"/initial_checked_models",schemaPath:"#/properties/initial_checked_models/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"};null===p?p=[a]:p.push(a),h++;break e}}else{const e={instancePath:t+"/initial_checked_models",schemaPath:"#/properties/initial_checked_models/type",keyword:"type",params:{type:"array"},message:"must be array"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.initial_interval&&"string"!=typeof e.initial_interval){const e={instancePath:t+"/initial_interval",schemaPath:"#/properties/initial_interval/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}if(void 0!==e.initial_target_var&&"string"!=typeof e.initial_target_var){const e={instancePath:t+"/initial_target_var",schemaPath:"#/properties/initial_target_var/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}if(void 0!==e.initial_task_ids){let a=e.initial_task_ids;if(a&&"object"==typeof a&&!Array.isArray(a)){if(Object.keys(a).length<1){const e={instancePath:t+"/initial_task_ids",schemaPath:"#/properties/initial_task_ids/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};null===p?p=[e]:p.push(e),h++}}else{const e={instancePath:t+"/initial_task_ids",schemaPath:"#/properties/initial_task_ids/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.initial_xaxis_range){let a=e.initial_xaxis_range;if(!Array.isArray(a)&&null!==a){const e={instancePath:t+"/initial_xaxis_range",schemaPath:"#/properties/initial_xaxis_range/type",keyword:"type",params:{type:s.properties.initial_xaxis_range.type},message:"must be array,null"};null===p?p=[e]:p.push(e),h++}if(Array.isArray(a)){if(a.length>2){const e={instancePath:t+"/initial_xaxis_range",schemaPath:"#/properties/initial_xaxis_range/maxItems",keyword:"maxItems",params:{limit:2},message:"must NOT have more than 2 items"};null===p?p=[e]:p.push(e),h++}if(a.length<2){const e={instancePath:t+"/initial_xaxis_range",schemaPath:"#/properties/initial_xaxis_range/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};null===p?p=[e]:p.push(e),h++}const e=a.length;for(let s=0;s<e;s++){let e=a[s];if("string"==typeof e){if(!o.validate(e)){const e={instancePath:t+"/initial_xaxis_range/"+s,schemaPath:"#/properties/initial_xaxis_range/items/format",keyword:"format",params:{format:"date"},message:'must match format "date"'};null===p?p=[e]:p.push(e),h++}}else{const e={instancePath:t+"/initial_xaxis_range/"+s,schemaPath:"#/properties/initial_xaxis_range/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}}let s,r=a.length;if(r>1){const e={};for(;r--;){let i=a[r];if("string"==typeof i){if("number"==typeof e[i]){s=e[i];const a={instancePath:t+"/initial_xaxis_range",schemaPath:"#/properties/initial_xaxis_range/uniqueItems",keyword:"uniqueItems",params:{i:r,j:s},message:"must NOT have duplicate items (items ## "+s+" and "+r+" are identical)"};null===p?p=[a]:p.push(a),h++;break}e[i]=r}}}}}if(void 0!==e.intervals){let a=e.intervals;if(Array.isArray(a)){if(a.length<1){const e={instancePath:t+"/intervals",schemaPath:"#/properties/intervals/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===p?p=[e]:p.push(e),h++}const e=a.length;for(let s=0;s<e;s++){let e=a[s];if("string"==typeof e){if(!l.test(e)){const e={instancePath:t+"/intervals/"+s,schemaPath:"#/properties/intervals/items/pattern",keyword:"pattern",params:{pattern:"^[1-9]?[0-9]%$"},message:'must match pattern "^[1-9]?[0-9]%$"'};null===p?p=[e]:p.push(e),h++}}else{const e={instancePath:t+"/intervals/"+s,schemaPath:"#/properties/intervals/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}}let s,r=a.length;if(r>1){const e={};for(;r--;){let i=a[r];if("string"==typeof i){if("number"==typeof e[i]){s=e[i];const a={instancePath:t+"/intervals",schemaPath:"#/properties/intervals/uniqueItems",keyword:"uniqueItems",params:{i:r,j:s},message:"must NOT have duplicate items (items ## "+s+" and "+r+" are identical)"};null===p?p=[a]:p.push(a),h++;break}e[i]=r}}}}else{const e={instancePath:t+"/intervals",schemaPath:"#/properties/intervals/type",keyword:"type",params:{type:"array"},message:"must be array"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.models){let a=e.models;if(Array.isArray(a)){if(a.length<1){const e={instancePath:t+"/models",schemaPath:"#/properties/models/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===p?p=[e]:p.push(e),h++}let e,s=a.length;if(s>1)e:for(;s--;)for(e=s;e--;)if(n(a[s],a[e])){const a={instancePath:t+"/models",schemaPath:"#/properties/models/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"};null===p?p=[a]:p.push(a),h++;break e}}else{const e={instancePath:t+"/models",schemaPath:"#/properties/models/type",keyword:"type",params:{type:"array"},message:"must be array"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.target_variables){let a=e.target_variables;if(Array.isArray(a)){if(a.length<1){const e={instancePath:t+"/target_variables",schemaPath:"#/properties/target_variables/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===p?p=[e]:p.push(e),h++}const e=a.length;for(let s=0;s<e;s++){let e=a[s];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.value){const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/required",keyword:"required",params:{missingProperty:"value"},message:"must have required property 'value'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.text){const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/required",keyword:"required",params:{missingProperty:"text"},message:"must have required property 'text'"};null===p?p=[e]:p.push(e),h++}if(void 0===e.plot_text){const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/required",keyword:"required",params:{missingProperty:"plot_text"},message:"must have required property 'plot_text'"};null===p?p=[e]:p.push(e),h++}for(const a in e)if("value"!==a&&"text"!==a&&"plot_text"!==a){const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};null===p?p=[e]:p.push(e),h++}if(void 0!==e.value){let a=e.value;if("string"==typeof a){if(i(a)<1){const e={instancePath:t+"/target_variables/"+s+"/value",schemaPath:"#/properties/target_variables/items/properties/value/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===p?p=[e]:p.push(e),h++}}else{const e={instancePath:t+"/target_variables/"+s+"/value",schemaPath:"#/properties/target_variables/items/properties/value/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.text){let a=e.text;if("string"==typeof a){if(i(a)<1){const e={instancePath:t+"/target_variables/"+s+"/text",schemaPath:"#/properties/target_variables/items/properties/text/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===p?p=[e]:p.push(e),h++}}else{const e={instancePath:t+"/target_variables/"+s+"/text",schemaPath:"#/properties/target_variables/items/properties/text/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.plot_text){let a=e.plot_text;if("string"==typeof a){if(i(a)<1){const e={instancePath:t+"/target_variables/"+s+"/plot_text",schemaPath:"#/properties/target_variables/items/properties/plot_text/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===p?p=[e]:p.push(e),h++}}else{const e={instancePath:t+"/target_variables/"+s+"/plot_text",schemaPath:"#/properties/target_variables/items/properties/plot_text/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[e]:p.push(e),h++}}}else{const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[e]:p.push(e),h++}}}else{const e={instancePath:t+"/target_variables",schemaPath:"#/properties/target_variables/type",keyword:"type",params:{type:"array"},message:"must be array"};null===p?p=[e]:p.push(e),h++}}if(void 0!==e.task_ids){let a=e.task_ids;if(a&&"object"==typeof a&&!Array.isArray(a)){if(Object.keys(a).length<1){const e={instancePath:t+"/task_ids",schemaPath:"#/properties/task_ids/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};null===p?p=[e]:p.push(e),h++}for(const e in a)if(!d.test(e)){const a={instancePath:t+"/task_ids",schemaPath:"#/properties/task_ids/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"};null===p?p=[a]:p.push(a),h++}for(const e in a)if(d.test(e)){let s=a[e];if(Array.isArray(s)){const a=s.length;for(let r=0;r<a;r++){let a=s[r];if(a&&"object"==typeof a&&!Array.isArray(a)){if(void 0!==a.value){let s=a.value;if("string"==typeof s){if(i(s)<1){const a={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+r+"/value",schemaPath:"#/properties/task_ids/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/properties/value/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===p?p=[a]:p.push(a),h++}}else{const a={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+r+"/value",schemaPath:"#/properties/task_ids/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/properties/value/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[a]:p.push(a),h++}}if(void 0!==a.text){let s=a.text;if("string"==typeof s){if(i(s)<1){const a={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+r+"/text",schemaPath:"#/properties/task_ids/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/properties/text/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===p?p=[a]:p.push(a),h++}}else{const a={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+r+"/text",schemaPath:"#/properties/task_ids/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/properties/text/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[a]:p.push(a),h++}}}else{const a={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+r,schemaPath:"#/properties/task_ids/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[a]:p.push(a),h++}}}else{const a={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/task_ids/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/type",keyword:"type",params:{type:"array"},message:"must be array"};null===p?p=[a]:p.push(a),h++}}}else{const e={instancePath:t+"/task_ids",schemaPath:"#/properties/task_ids/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[e]:p.push(e),h++}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[e]:p.push(e),h++}return c.errors=p,0===h}}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={id:s,exports:{}};return e[s](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.nc=void 0;var s,r,i,n,o,l,d,c,u,m,p,h,f,_,g={};s=a(379),r=a.n(s),i=a(795),n=a.n(i),o=a(569),l=a.n(o),d=a(565),c=a.n(d),u=a(216),m=a.n(u),p=a(589),h=a.n(p),f=a(253),(_={}).styleTagTransform=h(),_.setAttributes=c(),_.insert=l().bind(null,"head"),_.domAPI=n(),_.insertStyleElement=m(),r()(f.Z,_),f.Z&&f.Z.locals&&f.Z.locals,(()=>{function e(e){return new Date(parseInt(e.slice(0,4)),parseInt(e.slice(5,7))-1,parseInt(e.slice(8,10)))}function t(e,t){$("#uemInfoModalTitle").html(e),$("#uemInfoModalBody").html(t),$("#uemInfoModal").modal("show")}function s(t){const a=t.state,s=t.uiState,r=$("[data-title='Jump to As_Of']"),i=a.available_as_ofs[s.selected_target_var];r.daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:parseInt(i[0].slice(0,4)),maxYear:parseInt(i.at(-1).slice(0,4))}),r.on("apply.daterangepicker",(function(r,i){const n=i.startDate.format("YYYY-MM-DD");i.setStartDate(new Date),i.setEndDate(new Date);const l=function(t,a){if(0===a.length)throw new Error("availableYears is empty");if(-1!==a.indexOf(t))return t;const s=e(t),r=a.map((t=>e(t)));let i=null;return r.forEach((e=>{const t=null===i?null:Math.abs(i-s),a=Math.abs(e-s);(null===i||a<t)&&(i=e)})),i.toISOString().split("T")[0]}(n,a.available_as_ofs[s.selected_target_var]);console.debug(`apply.daterangepicker: pickedDate=${n}, closestAsOf=${l}, selected_as_of_date=${s.selected_as_of_date}, diff=${l!==s.selected_as_of_date}`),l!==s.selected_as_of_date&&(s.selected_as_of_date=l,t.fetchDataUpdatePlot(!0,!1,!0),o(!1,s.selected_as_of_date))}))}function r(e,t){const a=$("#forecastViz_select_model"),s=e.state,r=e.uiState;a.empty(),e.state.models.filter((function(t){return e.state.forecasts.hasOwnProperty(t)})).forEach((function(e){const t=r.selected_models.indexOf(e)>-1,n=s.models.indexOf(e);a.append(i(e,r.colors[n],!0,t))})),e.state.models.filter((function(t){return!e.state.forecasts.hasOwnProperty(t)})).forEach((function(e){const t=r.selected_models.indexOf(e)>-1;a.append(i(e,"grey",!1,t))})),c(e),function(e){const t=e.lastError,a=$(`#${e.name}`).parent();if(null===t)a.children("img").remove();else{const e=$(`<img src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" title="${t}" alt="${t}"\n    class="align-baseline" style="height: 16px; width: 16px; display: inline-block;" >`);a.after("&nbsp;",e)}}(t)}function i(e,t,a,s){return`<div class="form-group form-check"\n                 style="margin-bottom: 0${a?"":"; color: lightgrey"}">\n                <label>\n                    <input type="checkbox" id="${e}" class="model-check" ${s?"checked":""}>\n                    &nbsp;${e}\n                    &nbsp;<span class="forecastViz_dot" style="background-color: ${t}; "></span>\n                </label>\n            </div>`}function n(e){e?($("#removeUserEnsemble").removeClass("disabled"),$("#downloadUserEnsemble").removeClass("disabled"),$("#infoUserEnsemble").removeClass("disabled"),$("#editNameUserEnsemble").addClass("disabled")):($("#removeUserEnsemble").addClass("disabled"),$("#downloadUserEnsemble").addClass("disabled"),$("#infoUserEnsemble").addClass("disabled"),$("#editNameUserEnsemble").removeClass("disabled"))}function o(e,t){e?$("#currentTruthDate").text(`Current (${t})`):$("#asOfTruthDate").text(`As of ${t}`)}function l(){return document.getElementById("ploty_div")}function d(e){const t=$("#forecastViz_Current_Truth").prop("checked"),a=$("#forecastViz_Truth_as_of").prop("checked"),s=[];t&&s.push("Current Truth"),a&&s.push("Truth as of"),e.truthsSelected(e,s)}function c(e){$(".model-check").change((function(){const t=$(this),a=t.prop("id"),s=t.prop("checked");e.modelChecked(e,a,s)}))}function u(e){const t=e.state,a=e.uiState;if(0===t.target_variables.length)return{};const s=t.target_variables.filter((e=>e.value===a.selected_target_var))[0].plot_text;return{autosize:!0,showlegend:!1,title:{text:`Forecasts of ${s} <br> in ${Object.values(a.selected_task_ids)} as of ${a.selected_as_of_date}`,x:.5,y:.9,xanchor:"center",yanchor:"top"},xaxis:{title:{text:"Date"},rangeslider:{}},yaxis:{title:{text:s,hoverformat:".2f"},fixedrange:!1}}}function m(e){var t=0;return e.forEach((e=>{if("number"!=typeof e)throw new Error(`array item was not a number: ${e}`);t+=e})),t/e.length}a.d(g,{Z:()=>v});const p=function(e,t){if(0===e.length)throw new Error("_calcUemForecasts(): must have one or more componentModels");const a=[];if(e.forEach((e=>{Object.hasOwn(t,e)||a.push(e)})),0!==a.length)throw new Error(`_calcUemForecasts(): some models had no forecast data: ${a}`);const s=new Set(e.map((e=>JSON.stringify(Object.keys(t[e])))));if(1!==s.size)throw new Error(`not all forecasts had the same quantiles: ${JSON.stringify([...s])}`);const r=[];e.forEach((e=>{r.push(new Set(t[e].target_end_date))}));const i=r.reduce(((e,t)=>new Set([...e].filter((e=>t.has(e))))));if(0===i.size)throw new Error("_calcUemForecasts(): forecasts had no common target_end_dates");const n={};e.forEach((e=>{n[e]=[...i].map((a=>t[e].target_end_date.indexOf(a)))}));const o=t[e[0]],l={target_end_date:[...i]};return Object.keys(o).forEach((a=>{if(a.startsWith("q0.")){const s=[];e.forEach((e=>{const r=t[e][a],i=n[e].map((e=>r[e]));s.push(i)})),l[a]=function(e){const t=new Set(e.map((e=>e.length)));if(1!==t.size)throw new Error(`quantileArrays not all the same length: ${e}`);const a=[];for(let s=0;s<t.values().next().value;s++){const t=[];e.forEach((e=>{t.push(e[s])}));const r=m(t);a.push(r)}return a}(s)}})),l};var h=a(840);const f={name:"User-Ensemble",models:[],lastError:null},_={isIndicateRedraw:!1,_fetchData:null,_calcUemForecasts:null,isUemEnabled:!0,uiState:{selected_target_var:"",selected_task_ids:{},selected_interval:"",selected_as_of_date:"",selected_truth:["Current Truth","Truth as of"],selected_models:[],last_selected_models:[],colors:[]},state:{target_variables:[],task_ids:[],intervals:[],available_as_ofs:[],current_date:"",models:[],initial_xaxis_range:null,current_truth:[],as_of_truth:[],forecasts:{}},initialize(e,a,s,r,i){if(this._fetchData=a,this.isIndicateRedraw=s,this._calcUemForecasts=i,console.debug("initialize(): entered"),null===document.getElementById(e))throw`componentDiv DOM node not found: '${e}'`;if(function(e){if(null===e||"object"!=typeof e)throw`options object is required but missing: '${e}'`;if(!h(e))throw console.error(`_validateOptions(): invalid schema. ${h.errors.length} error(s). options:, errors:`,JSON.stringify(e,null,"    "),h.errors),`invalid options structure: ${h.errors.map((e=>JSON.stringify(e))).join(", ")}`;const t=e.available_as_ofs,a=e.target_variables;Object.keys(t).forEach((e=>{let t=!1;if(a.forEach((a=>{a.value===e&&(t=!0)})),!t)throw`available_as_ofs key not in target_variables value. key=${e}`}));const s=e.models;e.initial_checked_models.forEach((e=>{if(!s.includes(e))throw`initial_checked_models model not in models: ${e}`}));const r=e.initial_interval;if(!e.intervals.includes(r))throw`initial_interval not in intervals: ${r}`;const i=a.map((e=>e.value)),n=e.initial_target_var;if(!i.includes(n))throw`initial_target_var not in target_variables: ${n}`;const o=e.initial_as_of;if(!t[n].includes(o))throw`initial_as_of not in available_as_ofs: ${o}`;const l=e.task_ids,d=e.initial_task_ids;if(c=new Set(Object.keys(l)),u=new Set(Object.keys(d)),c.size!==u.size||![...c].every((e=>u.has(e))))throw`initial_task_ids key !== task_ids: ${JSON.stringify(d)}`;var c,u;Object.keys(d).forEach((e=>{const t=d[e],a=l[e].map((e=>e.value));if(!a.includes(t))throw`initial_task_ids value not in task_ids. initialTaskIdValue=${t}, taskIdValues=${a}`}))}(r),this.state.target_variables=r.target_variables,this.state.task_ids=r.task_ids,this.state.intervals=r.intervals,this.state.available_as_ofs=r.available_as_ofs,this.state.current_date=r.current_date,this.state.models=r.models,this.state.initial_xaxis_range=r.hasOwnProperty("initial_xaxis_range")?r.initial_xaxis_range:null,this.uiState.colors=Array(parseInt(this.state.models.length/10,10)+1).fill(["#0d0887","#46039f","#7201a8","#9c179e","#bd3786","#d8576b","#ed7953","#fb9f3a","#fdca26","#f0f921"]).flat(),this.uiState.selected_target_var=r.initial_target_var,this.uiState.selected_task_ids=r.initial_task_ids,this.uiState.selected_interval=r.initial_interval,this.uiState.selected_as_of_date=r.initial_as_of,this.uiState.selected_models=r.initial_checked_models,function(){const e=$('<div class="modal fade" id="uemInfoModal" tabIndex="-1" aria-labelledby="uemInfoModalTitle"\n     aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title" id="uemInfoModalTitle">(title here)</h5>\n                <a class="close" data-dismiss="modal">&times;</a>\n            </div>\n            <div class="modal-body" id="uemInfoModalBody">(body here)</div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>');$(document.body).append(e);const t=$('<div class="modal fade" id="uemEditModelNameModal" tabIndex="-1" aria-labelledby="uemInfoModalTitle"\n     aria-hidden="true">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title" id="uemInfoModalTitle">User Ensemble Model Name</h5>\n                <a class="close" data-dismiss="modal">&times;</a>\n            </div>\n            <div class="modal-body">\n               <form novalidate onsubmit="return false">\n                   <div class="form-group">\n                       <label for="model-name" class="col-form-label">Model name:</label>\n                       <input type="text" class="form-control is-valid" id="uemEditModelName" value="(name here)">\n                       <div class="invalid-feedback hidden">(invalid here)</div>\n                   </div>\n               </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>\n                <button type="button" class="btn btn-primary" data-dismiss="modal" id="uemEditSaveButton">Save</button>\n           </div>\n    </div>\n</div>');$(document.body).append(t)}(),"function"!=typeof i)console.log("disabling human judgement ensemble model feature",i,typeof i),this.isUemEnabled=!1;else if(this.state.models.includes(f.name)){const e=f.name+"_"+Math.floor(Date.now()/1e3);this.state.models.includes(e)?(console.warn("USER_ENSEMBLE_MODEL.name conflict. disabling human judgement ensemble model feature",f.name,this.state.models),t("Disabling human judgement ensemble model feature",`The default name '${f.name}' was in the models list.`)):(f.name=e,console.warn("USER_ENSEMBLE_MODEL.name conflict. renamed",f.name,this.state.models,e))}var n,o;console.log("initialize(): initializing UI"),function(e,t,a){function s(e,t){return $(`<div class="form-row">\n    <label for="${e}" class="col-sm-4 col-form-label">${t}:</label>\n    <div class="col-sm-8">\n        <select id="${e}" class="form-control"></select>\n    </div>\n</div>`)}const r=$('<div class="col-md-3" id="forecastViz_options"></div>'),i=$("<form></form>");i.append(s("target_variable","Outcome")),a.forEach((e=>{i.append(s(e,e.replace(/[_-]/g," ").toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase()))))})),i.append(s("intervals","Interval")),r.append(i);const n=$('<div class="form-group form-check forecastViz_select_data ">\n    <input title="curr truth" type="checkbox" id="forecastViz_Current_Truth" value="Current Truth" checked>\n      &nbsp;<span id="currentTruthDate">Current (current truth date here)</span>\n      &nbsp;<span class="forecastViz_dot" style="background-color: lightgrey; "></span>\n    <br>\n    <input title="truth as of" type="checkbox" id="forecastViz_Truth_as_of" value="Truth as of" checked>\n      &nbsp;<span id="asOfTruthDate">(as of truth date here)</span>\n      &nbsp;<span class="forecastViz_dot" style="background-color: black;"></span>\n</div>');let o;r.append('<div class="pt-md-3">Select Truth Data:</div>'),r.append(n),o=t?'<div class="dropdown">\n  <button class="btn btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" style="float: right;" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n    Actions\n  </button>\n  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">\n    <a class="dropdown-item" id="addUserEnsemble" href="#">Add User Ensemble</a>\n    <a class="dropdown-item disabled" id="removeUserEnsemble" href="#">Remove User Ensemble</a>\n    <a class="dropdown-item disabled" id="downloadUserEnsemble" href="#">Download User Ensemble CSV</a>\n    <a class="dropdown-item disabled" id="infoUserEnsemble" href="#">User Ensemble Info...</a>\n    <a class="dropdown-item" id="editNameUserEnsemble" href="#">Edit User Ensemble Model Name...</a>\n    <a class="dropdown-item" id="helpUserEnsemble" target="_blank" href="https://github.com/reichlab/predtimechart#human-judgement-ensemble-model">Help...</a>\n  </div>\n</div>\n':"",r.append($(o+'<button type="button" class="btn btn-sm rounded-pill" id="forecastViz_shuffle" style="float: right;">\n    Shuffle Colours</button>\n<label class="forecastViz_label" for="forecastViz_all">Select Models:</label>\n<input type="checkbox" id="forecastViz_all">')),r.append($('<div id="forecastViz_select_model"></div>'));const l=$('<div class="col-md-9" id="forecastViz_viz"></div>'),d=$('<div class="container">\n    <div class="col-md-12 text-center">\n        <button type="button" class="btn btn-primary" id="decrement_as_of">&lt;</button>\n        <button type="button" class="btn btn-primary" id="increment_as_of">&gt;</button>\n    </div>\n</div>');l.append($('<p class="forecastViz_disclaimer"><b><span id="disclaimer">(disclaimer here)</span></b></p>')),l.append($('<div id="ploty_div" style="width: 100%; height: 72vh; position: relative;"></div>')),l.append(d),l.append($('<p style="text-align:center"><small>Note: You can navigate to forecasts from previous weeks with the left and right arrow keys</small></p>')),$(document.getElementById(e)).empty().append(r,l)}(e,this.isUemEnabled,Object.keys(this.state.task_ids)),this.initializeUI(r.disclaimer),n=this,o=f,$("#target_variable").change((function(){n.targetVariableSelected(n,this.value)})),Object.keys(n.state.task_ids).forEach((function(e){$(`#${e}`).change((function(){n.taskIdsSelected(n,function(e){const t={};return Object.keys(e.state.task_ids).forEach((function(e){const a=$(`#${e}`);t[e]=a.val()})),t}(n))}))})),$("#intervals").change((function(){n.intervalSelected(n,this.value)})),$("#forecastViz_Current_Truth").change((function(){d(n)})),$("#forecastViz_Truth_as_of").change((function(){d(n)})),$("#forecastViz_shuffle").click((function(){n.shuffleColors(n)})),$("#addUserEnsemble").click((function(e){e.preventDefault(),n.addUserEnsemble(n)})),$("#removeUserEnsemble").click((function(e){e.preventDefault(),n.removeUserEnsemble(n)})),$("#downloadUserEnsemble").click((function(e){e.preventDefault(),n.downloadUserEnsemble(n,o)})),$("#infoUserEnsemble").click((function(e){e.preventDefault(),t("User Ensemble Settings",`<form>\n  <div class="form-group">\n    <label for="model-name" class="col-form-label">Model name:</label>\n    <input type="text" class="form-control" id="model-name" readonly value="${o.name}">\n  </div>\n  <div class="form-group">\n    <label for="model-list" class="col-form-label">Component models:</label>\n    <input type="text" class="form-control" id="model-list" readonly value="${o.models.join(", ")}">\n  </div>\n  <div class="form-group">\n    <label for="last-error" class="col-form-label">Last error:</label>\n    <textarea class="form-control" id="last-error" readonly>${null===o.lastError?"(no errors)":o.lastError}</textarea>\n  </div>\n</form>`)})),$("#uemEditModelName").on("input",(function(){const e=$("#uemEditModelName").val(),t=function(e,t){return 0===t.length?"name is required":t.length>31?"name is more than 31 characters":e.includes(t)?"name already used":!/^[a-zA-Z0-9_-]+$/.test(t)&&"name had invalid characters. must be letters, numbers, underscores, or hypens'"}(n.state.models,e),a=$("#uemEditModelNameModal .invalid-feedback"),s=$("#uemEditModelNameModal input");t?(a.html(t),a.show(),s.addClass("is-invalid")):(a.html(""),a.hide(),s.removeClass("is-invalid"))})),$("#uemEditSaveButton").click((function(){const e=$("#uemEditModelName").val();n.uemEditSaveModelName(n,o,e)})),$("#editNameUserEnsemble").click((function(e){e.preventDefault();const t=o.name;$("#uemEditModelName").val(t),$("#uemEditModelNameModal").modal("show")})),$("#forecastViz_all").change((function(){const e=$(this).prop("checked");n.toggleModels(n,e)})),c(n),$("#decrement_as_of").click((function(){n.decrementAsOf(n)})),$("#increment_as_of").click((function(){n.incrementAsOf(n)})),window.addEventListener("keydown",(function(e){"ArrowLeft"===e.code?n.decrementAsOf(n):"ArrowRight"===e.code&&n.incrementAsOf(n)})),console.log("initialize(): fetching data and updating plot"),this.fetchDataUpdatePlot(!0,!0,!1),console.log("initialize(): done")},initializeUI(e){!function(e){const t=e.uiState,a=$("#target_variable");e.state.target_variables.forEach((function(e){const s=e.value===t.selected_target_var?"selected":"",r=`<option value="${e.value}" ${s} >${e.text}</option>`;a.append(r)}))}(this),function(e){const t=e.state,a=e.uiState.selected_task_ids;Object.keys(e.state.task_ids).forEach((function(e){const s=$(`#${e}`);t.task_ids[e].forEach((t=>{const r=t.value===a[e]?"selected":"",i=`<option value="${t.value}" ${r} >${t.text}</option>`;s.append(i)}))}))}(this),function(e){const t=e.uiState,a=$("#intervals");e.state.intervals.forEach((function(e){const s=`<option value="${e}" ${e===t.selected_interval?"selected":""} >${e}</option>`;a.append(s)}))}(this),r(this,f),o(!0,this.state.current_date),o(!1,this.uiState.selected_as_of_date),function(e){$("#disclaimer").text(e)}(e);const t=l(),a=u(this);Plotly.newPlot(t,[],a,{modeBarButtonsToRemove:["lasso2d","autoScale2d"],modeBarButtonsToAdd:[{name:"Jump to As_Of",icon:{width:448,height:512,path:"M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm64 80v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm128 0v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H336zM64 400v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H208zm112 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H336c-8.8 0-16 7.2-16 16z"},click:()=>null}]}),s(this)},selectableModels(){return this.state.models.filter((function(e,t){return t<100}))},fetchDataUpdatePlot(e,t,a){if(e){const s=[this.fetchAsOfTruth(),this.fetchForecasts()];t&&s.push(this.fetchCurrentTruth()),console.log(`fetchDataUpdatePlot(${e}, ${t}, ${a}): waiting on promises`);const i=$(l());this.isIndicateRedraw&&i.fadeTo(0,.25),Promise.all(s).then((s=>{if(console.log(`fetchDataUpdatePlot(${e}, ${t}, ${a}): Promise.all() done. updating plot`,s),this.isUemEnabled&&this.state.models.includes(f.name))try{this.state.forecasts[f.name]=p(f.models,this.state.forecasts),f.lastError=null,console.log("fetchDataUpdatePlot(): forecasts:",this.state.forecasts[f.name])}catch(e){f.lastError=e,console.warn(`fetchDataUpdatePlot(): error calling _calcUemForecasts(): ${e}`)}r(this,f),this.updatePlot(a),this.isIndicateRedraw&&i.fadeTo(0,1)}))}else console.log(`fetchDataUpdatePlot(${e}, ${t}, ${a}): updating plot`),this.updatePlot(a)},fetchCurrentTruth(){return this.state.current_truth=[],this._fetchData(!1,this.uiState.selected_target_var,this.uiState.selected_task_ids,this.state.current_date).then((e=>e.json())).then((e=>{this.state.current_truth=e})).catch((e=>console.log(`fetchCurrentTruth(): error: ${e.message}`)))},fetchAsOfTruth(){return this.state.as_of_truth=[],this._fetchData(!1,this.uiState.selected_target_var,this.uiState.selected_task_ids,this.uiState.selected_as_of_date).then((e=>e.json())).then((e=>{this.state.as_of_truth=e})).catch((e=>console.log(`fetchAsOfTruth(): error: ${e.message}`)))},fetchForecasts(){return this.state.forecasts={},this._fetchData(!0,this.uiState.selected_target_var,this.uiState.selected_task_ids,this.uiState.selected_as_of_date).then((e=>e.json())).then((e=>{this.state.forecasts=e})).catch((e=>console.log(`fetchForecasts(): error: ${e.message}`)))},addUserEnsembleModel(){const e=this.uiState.selected_models.filter((function(e){return e!==f.name}));if(e.length<=1)return console.warn(`addUserEnsembleModel(): must select two or more componentModels. #selected=${e.length}`),void t("Invalid Component Models",`Must select two or more componentModels (${e.length} selected).`);try{this.state.forecasts[f.name]=p(e,this.state.forecasts),f.lastError=null,console.log("addUserEnsembleModel(): forecasts:",this.state.forecasts[f.name])}catch(e){f.lastError=e,console.warn(`addUserEnsembleModel(): error calling _calcUemForecasts(): ${e}`)}this.state.models.includes(f.name)||this.state.models.unshift(f.name),this.uiState.selected_models.includes(f.name)||this.uiState.selected_models.push(f.name),f.models.length=0,f.models.push(...e),console.log("addUserEnsembleModel(): created:",f.name,f.models)},removeUserEnsembleModel(){delete this.state.forecasts[f.name],this.state.models=this.state.models.filter((e=>e!==f.name)),this.uiState.selected_models=this.uiState.selected_models.filter((e=>e!==f.name)),f.models.length=0,f.lastError=null},updatePlot(e){const t=l(),a=function(e){const t=e.state,a=e.uiState;let s=[];a.selected_truth.includes("Current Truth")&&0!==Object.keys(t.current_truth).length&&s.push({x:t.current_truth.date,y:t.current_truth.y,type:"scatter",mode:"lines",name:"Current Truth",marker:{color:"darkgray"}}),a.selected_truth.includes("Truth as of")&&0!==Object.keys(t.as_of_truth).length&&s.push({x:t.as_of_truth.date,y:t.as_of_truth.y,type:"scatter",mode:"lines",opacity:.5,name:`Truth as of ${a.selected_as_of_date}`,marker:{color:"black"}});let r=[];0!==t.forecasts.length&&(r=Object.keys(t.forecasts).map((e=>{if(a.selected_models.includes(e)){const s=t.models.indexOf(e),r=t.forecasts[e],i=r.target_end_date,n=r["q0.025"],o=r["q0.25"],l=r["q0.5"],d=r["q0.75"],c=r["q0.975"],u=[];for(let e=0;e<i.length;e++)u.push({date:i[e],lq1:n[e],lq2:o[e],uq1:d[e],uq2:c[e],mid:l[e]});u.sort(((e,t)=>moment(e.date).isBefore(t.date)?-1:1));for(let e=0;e<u.length;e++)r.target_end_date[e]=u[e].date,r["q0.025"][e]=u[e].lq1,r["q0.25"][e]=u[e].lq2,r["q0.5"][e]=u[e].mid,r["q0.75"][e]=u[e].uq1,r["q0.975"][e]=u[e].uq2;const m=[];0!==Object.keys(t.as_of_truth).length&&m.push(t.as_of_truth.date.slice(-1)[0]),m.push(r.target_end_date.slice(0)[0]);const p=[];return 0!==Object.keys(t.as_of_truth).length&&p.push(t.as_of_truth.y.slice(-1)[0]),p.push(r["q0.5"].slice(0)[0]),{x:m,y:p,mode:"lines",type:"scatter",name:e,hovermode:!1,opacity:.7,line:{color:a.colors[s]},hoverinfo:"none"}}return[]}))),s=r.concat(...s);let i=[];return 0!==t.forecasts.length&&(i=Object.keys(t.forecasts).map((e=>{if(a.selected_models.includes(e)){const s=t.models.indexOf(e),r="hosp"===a.selected_target_var?"lines":"lines+markers",i=t.forecasts[e];let n,o;const l={x:i.target_end_date,y:i["q0.5"],type:"scatter",name:e,opacity:.7,mode:r,line:{color:a.colors[s]}};if("50%"===a.selected_interval)o="q0.25",n="q0.75";else{if("95%"!==a.selected_interval)return[l];o="q0.025",n="q0.975"}const d=0!==Object.keys(t.as_of_truth).length?t.as_of_truth.date.slice(-1).concat(i.target_end_date):i.target_end_date,c=0!==Object.keys(t.as_of_truth).length?t.as_of_truth.y.slice(-1).concat(i[o]):i[o],u=0!==Object.keys(t.as_of_truth).length?t.as_of_truth.y.slice(-1).concat(i[n]):i[n];return[l,{x:[].concat(d,d.slice().reverse()),y:[].concat(c,u.slice().reverse()),fill:"toself",fillcolor:a.colors[s],opacity:.3,line:{color:"transparent"},type:"scatter",name:e,showlegend:!1,hoverinfo:"skip"}]}return[]}))),s=s.concat(...i),s}(this);let r=u(this);0===a.length&&(r={title:{text:"No Visualization Data Found"}});const i=t.layout.xaxis.range,n=t.layout.yaxis.range,o=2===i.length&&-1===i[0]&&6===i[1],d=2===n.length&&-1===n[0]&&4===n[1];Plotly.react(t,a,r),o||Plotly.relayout(t,"xaxis.range",i),e&&!d&&Plotly.relayout(t,"yaxis.range",n),o&&null!=this.state.initial_xaxis_range&&Plotly.relayout(t,"xaxis.range",this.state.initial_xaxis_range),s(this)},addUserEnsemble(e){console.debug("addUserEnsemble click",e.uiState.selected_models),e.removeUserEnsembleModel(),e.addUserEnsembleModel(),r(e,f),e.updatePlot(!0),n(!0)},decrementAsOf(e){const t=e.state,a=e.uiState,s=t.available_as_ofs[a.selected_target_var].indexOf(a.selected_as_of_date);s>0&&(a.selected_as_of_date=t.available_as_ofs[a.selected_target_var][s-1],e.fetchDataUpdatePlot(!0,!1,!0),o(!1,this.uiState.selected_as_of_date))},downloadUserEnsemble(e,a){const s=e.uiState;console.debug("#downloadUserEnsemble click",a.models,s.selected_target_var,s.selected_as_of_date);let r="";e._calcUemForecasts(a.models,s.selected_target_var,s.selected_as_of_date,a.name).then((e=>{if(!e.ok)return console.error("#downloadUserEnsemble click: bad response",e),e.text().then((e=>{throw new Error(e)}));const t=Object.fromEntries(e.headers)["content-disposition"];return r=t.split('"')[1],e.text()})).then((e=>{console.debug("#downloadUserEnsemble click: data",typeof e,r),function(e,t,a){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(blob,a);else{const t=document.createElement("a");document.body.appendChild(t);const s=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(s);t.setAttribute("href",r),t.setAttribute("download",a),t.click(),setTimeout((()=>{window.URL.revokeObjectURL(r),document.body.removeChild(t)}),0)}}(e,0,r),console.debug("#downloadUserEnsemble click: download() done"),t("CSV File Downloaded",`User ensemble downloaded to "${r}".`)})).catch((e=>{console.error(`#downloadUserEnsemble click: error: ${e.message}`),t("Error Downloading CVS File",`"${e.message}"`)}))},incrementAsOf(e){const t=e.state,a=e.uiState,s=t.available_as_ofs[a.selected_target_var].indexOf(a.selected_as_of_date);s<t.available_as_ofs[a.selected_target_var].length-1&&(a.selected_as_of_date=t.available_as_ofs[a.selected_target_var][s+1],e.fetchDataUpdatePlot(!0,!1,!0),o(!1,this.uiState.selected_as_of_date))},intervalSelected(e,t){e.uiState.selected_interval=t,e.fetchDataUpdatePlot(!1,null,!0)},modelChecked(e,t,a){const s=e.uiState,r=s.selected_models.indexOf(t)>-1;a&&!r?s.selected_models.push(t):!a&&r&&(s.selected_models=s.selected_models.filter((function(e){return e!==t}))),e.fetchDataUpdatePlot(!1,null,!0)},removeUserEnsemble(e){e.removeUserEnsembleModel(),r(e,f),e.updatePlot(!0),n(!1)},shuffleColors(e){const t=e.uiState;t.colors=t.colors.sort((()=>.5-Math.random())),r(e,f),e.updatePlot(!0)},targetVariableSelected(e,t){e.uiState.selected_target_var=t,e.fetchDataUpdatePlot(!0,!0,!1)},taskIdsSelected(e,t){e.uiState.selected_task_ids=t,e.fetchDataUpdatePlot(!0,!0,!1)},toggleModels(e,t){const a=e.uiState;t?(a.last_selected_models=a.selected_models,a.selected_models=e.selectableModels()):a.selected_models=a.last_selected_models,function(e,t){e.state.models.forEach((function(e){const a=t.indexOf(e)>-1;$(`#${e}`).prop("checked",a)}))}(e,a.selected_models),e.updatePlot(!0)},truthsSelected(e,t){e.uiState.selected_truth=t,e.fetchDataUpdatePlot(!1,null,!0)},uemEditSaveModelName(e,t,a){t.name=a,console.info(`saved new user ensemble model name: '${a}'`)}},v=_})();var v=g.Z;export{v as default};